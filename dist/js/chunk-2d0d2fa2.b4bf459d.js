(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d2fa2"],{"5b98":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-container",[n("h1",[t._v("CommentForm")]),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{rules:t.titleRules,counter:20,label:"Title",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("v-textarea",{attrs:{rules:t.contentsRules,label:"Contents",required:"",flat:"",counter:""},model:{value:t.contents,callback:function(e){t.contents=e},expression:"contents"}}),n("v-btn",{attrs:{disabled:!t.valid},on:{click:t.createComment}},[t._v("\n            save\n          ")]),n("v-btn",{on:{click:t.clear}},[t._v("clear")])],1)],1)],1)],1),n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[t._v("CRUD demo")]),n("v-spacer"),n("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.showDialog}},[t._v("New Item")])],1),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.comments,"hide-actions":"",loading:t.progress},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[t._v(t._s(t._f("moment")(e.item.createdAt,"YYYY-MM-DD HH:MM:SS")))]),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.title))]),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.contents))]),n("td",{staticClass:"justify-center layout px-0"},[n("v-btn",{attrs:{color:"success",small:"",outline:"",flat:""},on:{click:function(n){t.updateComment(e.item)}}},[n("v-icon",{attrs:{small:""}},[t._v("\n            fa-edit\n          ")])],1),n("v-btn",{attrs:{color:"error",small:"",outline:"",flat:""},on:{click:function(n){t.deleteComment(e.item.id)}}},[n("v-icon",{attrs:{small:""}},[t._v("\n            fa-trash\n          ")])],1)],1)]}}])},[n("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:""},slot:"progress"})],1)],1)},r=[],a=n("ab48"),i=n("9530"),s=n.n(i);function c(){var t=Object(a["a"])(["\n    mutation updateComment($id: ID, $title: String, $contents: String) {\n        updateComment(data: {title: $title, contents: $contents}, where:{id:$id}) {\n            title\n            contents\n        }\n    }\n"]);return c=function(){return t},t}function l(){var t=Object(a["a"])(["\n    mutation deleteComment($id: ID) {\n        deleteComment(where:{id: $id}){\n            id\n        }\n    }\n"]);return l=function(){return t},t}function u(){var t=Object(a["a"])(["\n    mutation createComment($title: String, $contents: String) {\n        createComment(data: {status: PUBLISHED, title: $title, contents: $contents}) {\n            title: title\n            contents: contents\n        }\n    }\n"]);return u=function(){return t},t}function m(){var t=Object(a["a"])(["\n    query maxCommentCount{\n        commentsConnection {\n            aggregate {\n                count\n            }\n        }\n    }\n"]);return m=function(){return t},t}function d(){var t=Object(a["a"])(["\n    query feachCommentById($id: ID!) {\n        comments(where: { id: $id }) {\n            title\n            contents\n            createdAt\n        }\n    }\n"]);return d=function(){return t},t}function f(){var t=Object(a["a"])(["\n    query allCusto {\n        comments(where: {status: PUBLISHED}) {\n            id\n            title\n            contents\n            createdAt\n        }\n    }\n"]);return f=function(){return t},t}var v=s()(f()),h=(s()(d()),s()(m()),s()(u())),p=s()(l()),b=s()(c()),g={name:"CreatePost",data:function(){return{valid:!0,title:"",titleRules:[function(t){return!!t||"Title is required"},function(t){return t&&t.length<=20||"Title must be less than 20 characters"}],contents:"",contentsRules:[function(t){return!!t||"Content is required"}],comments:[],headers:[{text:"createdAt",value:"createdAt"},{text:"title",value:"title"},{text:"contents",value:"contents"},{text:"Actions",value:"name",sortable:!1}],error:"desu",progress:!1,dialog:!1}},methods:{createComment:function(){var t=this;this.$refs.form.validate()&&(this.progress=!0,this.$apollo.mutate({mutation:h,variables:{title:this.title,contents:this.contents}}).then(function(){t.$apollo.queries.comments.fetchMore({updateQuery:function(e,n){var o=n.fetchMoreResult;return t.clear(),t.showAlert(),{comments:o.comments}}}),t.dialog=!1,t.progress=!1}).catch(function(e){t.error=e}))},deleteComment:function(t){var e=this;confirm("Are you sure you want to delete this comment?")&&(this.progress=!0,this.$apollo.mutate({mutation:p,variables:{id:t}}).then(function(){e.$apollo.queries.comments.fetchMore({updateQuery:function(t,e){var n=e.fetchMoreResult;return{comments:n.comments}}}),e.progress=!1}).catch(function(t){e.error=t}))},updateComment:function(t){var e=this,n=t.id,o=t.title,r=t.contents;this.$apollo.mutate({mutation:b,variables:{id:n,title:o,contents:r}}).then(function(){e.$apollo.queries.comments.fetchMore({updateQuery:function(t,e){var n=e.fetchMoreResult;return{comments:n.comments}}}),e.progress=!1}).catch(function(t){e.error=t})},clear:function(){this.$refs.form.reset()},showAlert:function(){this.alertDisplay=!0;var t=this;setTimeout(function(){t.alertDisplay=!1},3e3)},showDialog:function(){this.dialog=!0}},apollo:{comments:v}},C=g,$=n("2877"),x=Object($["a"])(C,o,r,!1,null,null,null);x.options.__file="CreateComment.vue";e["default"]=x.exports}}]);
//# sourceMappingURL=chunk-2d0d2fa2.b4bf459d.js.map